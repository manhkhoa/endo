import{k as S,q as O,s as T,r as u,o as g,h as M,j as r,a as p,x as m,d as i,e as n,v as C,m as E,A as D,p as x,y as A,t as R,G as q,f as z,c as v,F as L,i as y,z as G,w as F}from"./app.ca5d1c04.js";const H={class:"grid grid-cols-2 gap-6"},J={class:"col-span-2"},K={class:"col-span-2 space-y-2"},P={name:"TaskMemberForm"},Q=Object.assign(P,{props:{visibility:{type:Boolean,default:!1}},emits:["close","completed"],setup(k,{emit:b}){S();const c={employees:[],manageMember:!1,manageChecklist:!1,manageMedia:!1,manageCompletion:!1,manageTaskList:!1},$="task/member/",s=O($),t=T({...c});return(d,a)=>{const V=u("BaseSelectSearch"),l=u("BaseSwitch"),f=u("FormAction"),_=u("BaseSideover");return g(),M(_,{visibility:k.visibility,onClose:a[15]||(a[15]=e=>b("close"))},{title:r(()=>[p("span",null,m(d.$trans("global.add",{attribute:d.$trans("task.member.member")})),1)]),default:r(()=>[i(f,{sideover:"","no-card":"","no-data-fetch":"","cancel-action":"",action:"create","init-url":$,"init-form":c,form:t,onEnd:a[12]||(a[12]=e=>b("close")),onCompleted:a[13]||(a[13]=e=>b("completed")),onCancelled:a[14]||(a[14]=e=>b("close"))},{default:r(()=>[p("div",H,[p("div",J,[i(V,{multiple:"",name:"employees",label:d.$trans("global.select",{attribute:d.$trans("employee.employee")}),modelValue:t.employees,"onUpdate:modelValue":a[0]||(a[0]=e=>t.employees=e),error:n(s).employees,"onUpdate:error":a[1]||(a[1]=e=>n(s).employees=e),"value-prop":"uuid","init-search":[],"search-key":"name","search-action":"employee/list"},{selectedOption:r(e=>[C(m(e.value.name)+" ("+m(e.value.codeNumber)+") ",1)]),listOption:r(e=>[C(m(e.option.name)+" ("+m(e.option.codeNumber)+") ",1)]),_:1},8,["label","modelValue","error"])]),p("div",K,[i(l,{reverse:"",modelValue:t.manageMember,"onUpdate:modelValue":a[2]||(a[2]=e=>t.manageMember=e),name:"manageMember",label:d.$trans("task.member.props.manage_member"),error:n(s).manageMember,"onUpdate:error":a[3]||(a[3]=e=>n(s).manageMember=e)},null,8,["modelValue","label","error"]),i(l,{reverse:"",modelValue:t.manageChecklist,"onUpdate:modelValue":a[4]||(a[4]=e=>t.manageChecklist=e),name:"manageChecklist",label:d.$trans("task.member.props.manage_checklist"),error:n(s).manageChecklist,"onUpdate:error":a[5]||(a[5]=e=>n(s).manageChecklist=e)},null,8,["modelValue","label","error"]),i(l,{reverse:"",modelValue:t.manageMedia,"onUpdate:modelValue":a[6]||(a[6]=e=>t.manageMedia=e),name:"manageMedia",label:d.$trans("task.member.props.manage_media"),error:n(s).manageMedia,"onUpdate:error":a[7]||(a[7]=e=>n(s).manageMedia=e)},null,8,["modelValue","label","error"]),i(l,{reverse:"",modelValue:t.manageCompletion,"onUpdate:modelValue":a[8]||(a[8]=e=>t.manageCompletion=e),name:"manageCompletion",label:d.$trans("task.member.props.manage_completion"),error:n(s).manageCompletion,"onUpdate:error":a[9]||(a[9]=e=>n(s).manageCompletion=e)},null,8,["modelValue","label","error"]),i(l,{reverse:"",modelValue:t.manageTaskList,"onUpdate:modelValue":a[10]||(a[10]=e=>t.manageTaskList=e),name:"manageTaskList",label:d.$trans("task.member.props.manage_task_list"),error:n(s).manageTaskList,"onUpdate:error":a[11]||(a[11]=e=>n(s).manageTaskList=e)},null,8,["modelValue","label","error"])])])]),_:1},8,["form"])]),_:1},8,["visibility"])}}}),W={class:"px-4 pt-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},X={class:""},Y={class:"text-xs text-gray-500"},Z={class:"text-sm text-gray-500 truncate"},ee={class:"text-sm text-gray-500 space-x-2"},ae={key:0,class:"fas fa-xs fa-user"},te={key:1,class:"fas fa-xs fa-list"},se={key:2,class:"fas fa-xs fa-paperclip"},oe={name:"TaskMemberList"},re=Object.assign(oe,{props:{task:{type:Object,default(){return{}}}},setup(k){const b=S();E();const c=D("emitter");x("task:edit");const $="task/member/",s=A(!1),t=T({}),d=l=>{Object.assign(t,l)},a=()=>{c.emit("listItems")},V=()=>{s.value=!1};return R(async()=>{c.on("addTaskMember",()=>{s.value=!0})}),q(()=>{c.all.delete("addTaskMember")}),(l,f)=>{const _=u("ListItem"),e=u("FloatingMenuItem"),w=u("FloatingMenu"),h=u("CardView"),I=u("Pagination"),N=u("BaseButton"),j=u("CardList"),B=z("tooltip");return g(),v(L,null,[i(_,{"init-url":$,uuid:n(b).params.uuid,onSetItems:d},null,8,["uuid"]),i(j,{header:t.headers,meta:t.meta,module:"task.member"},{actionButton:r(()=>{var o;return[!k.task.isCompleted&&((o=k.task.permission)==null?void 0:o.manageMember)?(g(),M(N,{key:0,onClick:f[1]||(f[1]=U=>s.value=!0)},{default:r(()=>[C(m(l.$trans("global.add",{attribute:l.$trans("task.member.member")})),1)]),_:1})):y("",!0)]}),default:r(()=>[p("div",W,[(g(!0),v(L,null,G(t.data,o=>(g(),M(h,{key:o.uuid,"img-src":o.employee.photo,path:{name:"EmployeeShow",params:{uuid:o.employee.uuid}}},{title:r(()=>[C(m(o.employee.name)+" ",1),p("span",X,"("+m(o.employee.codeNumber)+")",1)]),action:r(()=>{var U;return[!k.task.isCompleted&&((U=k.task.permission)==null?void 0:U.manageMember)?(g(),M(w,{key:0},{default:r(()=>[i(e,{icon:"fas fa-trash",onClick:ne=>n(c).emit("deleteItem",{uuid:k.task.uuid,moduleUuid:o.uuid})},{default:r(()=>[C(m(l.$trans("general.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)):y("",!0)]}),default:r(()=>[p("p",Y,m(o.employee.ageShortDisplay),1),p("p",Z,m(o.employee.designation)+" @ "+m(o.employee.branch),1),p("div",ee,[o.manageMember?F((g(),v("i",ae,null,512)),[[B,l.$trans("task.member.props.manage_member")]]):y("",!0),o.manageChecklist?F((g(),v("i",te,null,512)),[[B,l.$trans("task.member.props.manage_checklist")]]):y("",!0),o.manageMedia?F((g(),v("i",se,null,512)),[[B,l.$trans("task.member.props.manage_media")]]):y("",!0)])]),_:2},1032,["img-src","path"]))),128))]),p("div",null,[i(I,{"card-view":"",meta:t.meta,onRefresh:f[0]||(f[0]=o=>n(c).emit("listItems"))},null,8,["meta"])])]),_:1},8,["header","meta"]),i(Q,{visibility:s.value,onCompleted:a,onClose:V},null,8,["visibility"])],64)}}});export{re as default};
