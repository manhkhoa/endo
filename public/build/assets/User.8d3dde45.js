import{k as R,m as S,u as j,A,q as H,s as h,r as n,o as V,c as N,h as P,j as l,e as o,i as E,d as r,F as L,a as u,v as g,x as m}from"./app.ca5d1c04.js";const $={class:"space-x-4"},G={class:"grid grid-cols-2 gap-6"},q={class:"col-span-2"},z={class:"col-span-2 sm:col-span-1"},D={class:"col-span-2 sm:col-span-1"},W={name:"TeamConfigUserPermission"},J=Object.assign(W,{props:{team:{type:Object,default(){return{name:""}}}},setup(f){const c=R(),B=S(),_=j(),t=A("$trans"),p="team/permission/",i=H(p),v={action:"",users:[],permissions:[]};h({});const a=h({...v}),C=[{label:t("general.assign"),value:"assign"},{label:t("general.revoke"),value:"revoke"}],y=async d=>await _.dispatch(p+"search",{query:d,uuid:c.params.uuid}).then(s=>s).catch(s=>{}),U=async d=>await _.dispatch(p+"searchUser",{query:d,uuid:c.params.uuid}).then(s=>s).catch(s=>{});return(d,s)=>{const k=n("BaseButton"),T=n("PageHeader"),O=n("CardHeader"),w=n("BaseRadioGroup"),b=n("BaseSelect"),x=n("FormAction"),F=n("ParentTransition");return V(),N(L,null,[f.team.uuid?(V(),P(T,{key:0,title:o(t)(o(c).meta.label),navs:[{label:o(t)("team.team"),path:"TeamList"},{label:f.team.name,path:{name:"TeamShow",params:{uuid:f.team.uuid}}},{label:o(t)("team.config.config"),path:"TeamConfig"}]},{default:l(()=>[u("div",$,[r(k,{onClick:s[0]||(s[0]=e=>o(B).push({name:"TeamConfigPermission"}))},{default:l(()=>[g(m(o(t)("team.config.permission.role_permission")),1)]),_:1})])]),_:1},8,["title","navs"])):E("",!0),r(F,{appear:"",visibility:!0},{default:l(()=>[r(x,{"no-data-fetch":"","init-url":p,uuid:o(c).params.uuid,action:"userWiseAssign","init-form":v,form:a,"reset-form":"","keep-adding":!1},{default:l(()=>[r(O,{first:"",title:o(t)("team.config.permission.user_permission_config"),description:o(t)("team.config.permission.user_permission_info")},null,8,["title","description"]),u("div",G,[u("div",q,[r(w,{options:C,name:"action",modelValue:a.action,"onUpdate:modelValue":s[1]||(s[1]=e=>a.action=e),error:o(i).action,"onUpdate:error":s[2]||(s[2]=e=>o(i).action=e),horizontal:""},null,8,["modelValue","error"])]),u("div",z,[r(b,{modelValue:a.users,"onUpdate:modelValue":s[3]||(s[3]=e=>a.users=e),filterResults:!1,minChars:1,resolveOnLoad:!1,delay:500,multiple:"",name:"users","value-prop":"uuid",options:async function(e){return await U(e)},label:o(t)("global.select",{attribute:o(t)("user.user")}),error:o(i).users,"onUpdate:error":s[4]||(s[4]=e=>o(i).users=e)},{selectedOption:l(e=>[g(m(e.value.profile.name)+" ("+m(e.value.email)+") ",1)]),listOption:l(e=>[g(m(e.option.profile.name)+" ("+m(e.option.email)+") ",1)]),_:1},8,["modelValue","options","label","error"])]),u("div",D,[r(b,{modelValue:a.permissions,"onUpdate:modelValue":s[5]||(s[5]=e=>a.permissions=e),filterResults:!1,minChars:1,resolveOnLoad:!1,delay:500,multiple:"",name:"permissions",options:async function(e){return await y(e)},label:o(t)("global.select",{attribute:o(t)("team.config.permission.permission")}),error:o(i).permissions,"onUpdate:error":s[6]||(s[6]=e=>o(i).permissions=e)},null,8,["modelValue","options","label","error"])])])]),_:1},8,["uuid","form"])]),_:1})],64)}}});export{J as default};
