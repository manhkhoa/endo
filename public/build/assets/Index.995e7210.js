import{k as A,m as S,A as P,r as h,f as R,o,h as $,j as a,e as p,p as U,v as C,x as m,i as d,a as s,c as w,z as K,d as f,w as x,F as J,q as Q,s as T,u as W,E as G,t as N,n as M,J as z,g as X,y as Y}from"./app.ca5d1c04.js";import{d as H}from"./vuedraggable.umd.b6f8a751.js";const Z={class:"px-4 pt-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},ee={class:"w-4/5 truncate"},te={class:"text-xs text-gray-500"},se={class:"text-sm text-gray-500 truncate"},ae={class:"text-sm text-gray-500 space-x-2"},oe={key:0},ie=s("i",{class:"fas fa-calendar text-warning"},null,-1),ne=[ie],re={key:1},le=s("i",{class:"fas fa-check-circle fa-lg text-success"},null,-1),de=[le],ue={class:"text-sm text-gray-500 space-x-2"},ce={key:0},pe=s("i",{class:"fas fa-crown fa-lg text-primary dark:text-gray-400"},null,-1),me=[pe],_e={key:1},ge=s("i",{class:"fas fa-user fa-lg text-primary dark:text-gray-400"},null,-1),fe=[ge],ye={key:2},he=s("i",{class:"fas fa-box-archive fa-lg text-primary dark:text-gray-400"},null,-1),$e=[he],ve={key:3},ke=s("i",{class:"fas fa-star fa-lg text-warning"},null,-1),be=[ke],we={key:4},xe=s("i",{class:"fas fa-repeat fa-lg text-info"},null,-1),Ce=[xe],De={key:5},Be=s("i",{class:"fas fa-ban fa-lg text-danger"},null,-1),qe=[Be],Ve={name:"TaskListCardView"},Le=Object.assign(Ve,{props:{tasks:{type:Object,default:()=>({})}},setup(V){A();const b=S(),_=P("emitter");return(v,r)=>{const l=h("FloatingMenuItem"),k=h("FloatingMenu"),u=h("BaseBadge"),D=h("ProgressBar"),q=h("CardView",!0),n=h("Pagination"),g=h("BaseButton"),B=h("CardList"),i=R("tooltip");return o(),$(B,{header:V.tasks.headers,meta:V.tasks.meta,module:"task"},{actionButton:a(()=>[p(U)("task:create")?(o(),$(g,{key:0,onClick:r[1]||(r[1]=e=>p(b).push({name:"TaskCreate"}))},{default:a(()=>[C(m(v.$trans("global.add",{attribute:v.$trans("task.task")})),1)]),_:1})):d("",!0)]),default:a(()=>[s("div",Z,[(o(!0),w(J,null,K(V.tasks.data,e=>(o(),$(q,{key:e.uuid,path:{name:"TaskShow",params:{uuid:e.uuid}}},{title:a(()=>[s("div",null,m(e.codeNumber),1),s("div",ee,m(e.title),1)]),action:a(()=>[f(k,null,{default:a(()=>{var c,t;return[f(l,{icon:"fas fa-arrow-circle-right",onClick:y=>p(b).push({name:"TaskShow",params:{uuid:e.uuid}})},{default:a(()=>[C(m(v.$trans("general.show")),1)]),_:2},1032,["onClick"]),p(U)("task:edit")&&((c=e.permission)==null?void 0:c.isEditable)?(o(),$(l,{key:0,icon:"fas fa-edit",onClick:y=>p(b).push({name:"TaskEdit",params:{uuid:e.uuid}})},{default:a(()=>[C(m(v.$trans("general.edit")),1)]),_:2},1032,["onClick"])):d("",!0),p(U)("task:delete")&&((t=e.permission)==null?void 0:t.isDeletable)?(o(),$(l,{key:1,icon:"fas fa-trash",onClick:y=>p(_).emit("deleteItem",{uuid:e.uuid})},{default:a(()=>[C(m(v.$trans("general.delete")),1)]),_:2},1032,["onClick"])):d("",!0)]}),_:2},1024)]),progress:a(()=>[e.hasProgress?(o(),$(D,{key:0,percent:e.progress,color:e.progressColor,"bg-color":"transparent"},null,8,["percent","color"])):d("",!0)]),default:a(()=>{var c,t,y,L,F,E;return[s("p",te,m(e.owner.name)+" - "+m(e.owner.designation)+" @ "+m(e.owner.branch),1),s("p",se,[f(u,{design:(c=e.priority)!=null&&c.color?"custom":"",color:(t=e.priority)==null?void 0:t.color},{default:a(()=>{var I;return[C(m((I=e.priority)==null?void 0:I.name),1)]}),_:2},1032,["design","color"]),C(),f(u,{design:(y=e.category)!=null&&y.color?"custom":"",color:(L=e.category)==null?void 0:L.color},{default:a(()=>{var I;return[C(m((I=e.category)==null?void 0:I.name),1)]}),_:2},1032,["design","color"])]),s("div",ae,[s("span",null,m(e.due),1),e.isOverdue?x((o(),w("span",oe,ne)),[[i,e.overdueDaysDisplay]]):d("",!0),e.isCompleted?(o(),w("span",re,de)):d("",!0)]),s("div",ue,[e.isOwner?x((o(),w("span",ce,me)),[[i,v.$trans("task.props.owner")]]):d("",!0),!e.isOwner&&e.isMember?x((o(),w("span",_e,fe)),[[i,v.$trans("task.member.member")]]):d("",!0),e.isArchived?x((o(),w("span",ye,$e)),[[i,v.$trans("general.archived")]]):d("",!0),e.isFavorite?x((o(),w("span",ve,be)),[[i,v.$trans("task.props.favorite")]]):d("",!0),e.shouldRepeat&&((F=e.repeatation)==null?void 0:F.nextRepeatDateDisplay)?x((o(),w("span",we,Ce)),[[i,v.$trans("task.repeat.props.next_repeat_date")+": "+((E=e.repeatation)==null?void 0:E.nextRepeatDateDisplay)]]):d("",!0),e.isCancelled?x((o(),w("span",De,qe)),[[i,v.$trans("general.cancelled")]]):d("",!0)])]}),_:2},1032,["path"]))),128))]),s("div",null,[f(n,{"card-view":"",meta:V.tasks.meta,onRefresh:r[0]||(r[0]=e=>p(_).emit("listItems"))},null,8,["meta"])])]),_:1},8,["header","meta"])}}}),Ie={class:"truncate"},Ue={class:"text-xs"},Fe={class:"space-x-2"},Ee={key:0},Te=s("i",{class:"fas fa-calendar text-warning"},null,-1),Oe=[Te],Ae={key:1},Se=s("i",{class:"fas fa-check-circle fa-lg text-success"},null,-1),Pe=[Se],Re={name:"TaskListView"},je=Object.assign(Re,{props:{tasks:{type:Object,default:()=>({})}},setup(V){A();const b=S(),_=P("emitter");return(v,r)=>{const l=h("DataCell"),k=h("ProgressBar"),u=h("BaseBadge"),D=h("FloatingMenuItem"),q=h("FloatingMenu"),n=h("DataRow"),g=h("BaseButton"),B=h("DataTable"),i=R("tooltip");return o(),$(B,{header:V.tasks.headers,meta:V.tasks.meta,module:"task",onRefresh:r[1]||(r[1]=e=>p(_).emit("listItems"))},{actionButton:a(()=>[p(U)("task:create")?(o(),$(g,{key:0,onClick:r[0]||(r[0]=e=>p(b).push({name:"TaskCreate"}))},{default:a(()=>[C(m(v.$trans("global.add",{attribute:v.$trans("task.task")})),1)]),_:1})):d("",!0)]),default:a(()=>[(o(!0),w(J,null,K(V.tasks.data,e=>(o(),$(n,{key:e.uuid},{default:a(()=>[f(l,{name:"codeNumber"},{default:a(()=>[C(m(e.codeNumber),1)]),_:2},1024),f(l,{name:"title"},{default:a(()=>[s("span",Ie,m(e.title),1),e.hasProgress?(o(),$(k,{key:0,space:"",percent:e.progress,color:e.progressColor},null,8,["percent","color"])):d("",!0)]),_:2},1024),f(l,{name:"priority"},{default:a(()=>{var c,t;return[f(u,{design:(c=e.priority)!=null&&c.color?"custom":"",color:(t=e.priority)==null?void 0:t.color},{default:a(()=>{var y;return[C(m((y=e.priority)==null?void 0:y.name),1)]}),_:2},1032,["design","color"])]}),_:2},1024),f(l,{name:"category"},{default:a(()=>{var c,t;return[f(u,{design:(c=e.category)!=null&&c.color?"custom":"",color:(t=e.category)==null?void 0:t.color},{default:a(()=>{var y;return[C(m((y=e.category)==null?void 0:y.name),1)]}),_:2},1032,["design","color"])]}),_:2},1024),f(l,{name:"owner"},{default:a(()=>[C(m(e.owner.name)+" ",1),s("div",Ue,m(e.owner.designation)+" @ "+m(e.owner.branch),1)]),_:2},1024),f(l,{name:"due"},{default:a(()=>[s("div",Fe,[s("span",null,m(e.due),1),e.isOverdue?x((o(),w("span",Ee,Oe)),[[i,e.overdueDaysDisplay]]):d("",!0),e.isCompleted?(o(),w("span",Ae,Pe)):d("",!0)])]),_:2},1024),f(l,{name:"createdAt"},{default:a(()=>[C(m(e.createdAt),1)]),_:2},1024),f(l,{name:"action"},{default:a(()=>[f(q,null,{default:a(()=>{var c,t;return[f(D,{icon:"fas fa-arrow-circle-right",onClick:y=>p(b).push({name:"TaskShow",params:{uuid:e.uuid}})},{default:a(()=>[C(m(v.$trans("general.show")),1)]),_:2},1032,["onClick"]),p(U)("task:edit")&&((c=e.permission)==null?void 0:c.isEditable)?(o(),$(D,{key:0,icon:"fas fa-edit",onClick:y=>p(b).push({name:"TaskEdit",params:{uuid:e.uuid}})},{default:a(()=>[C(m(v.$trans("general.edit")),1)]),_:2},1032,["onClick"])):d("",!0),p(U)("task:delete")&&((t=e.permission)==null?void 0:t.isDeletable)?(o(),$(D,{key:1,icon:"fas fa-trash",onClick:y=>p(_).emit("deleteItem",{uuid:e.uuid})},{default:a(()=>[C(m(v.$trans("general.delete")),1)]),_:2},1032,["onClick"])):d("",!0)]}),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])}}}),Ne={class:"grid grid-cols-1"},Me={class:"col-span-1"},ze={name:"TaskListForm"},He=Object.assign(ze,{emits:["completed"],setup(V,{emit:b}){const _={name:""},v="task/",r=Q(v),l=T({..._}),k=u=>{b("completed",u)};return(u,D)=>{const q=h("BaseInput"),n=h("FormAction");return o(),$(n,{"no-card":!0,"init-url":v,"init-form":_,action:"addList",form:l,"keep-adding":!1,"after-submit":k},{default:a(()=>[s("div",Ne,[s("div",Me,[f(q,{type:"text",modelValue:l.name,"onUpdate:modelValue":D[0]||(D[0]=g=>l.name=g),name:"name",placeholder:u.$trans("task.list.props.name"),error:p(r).name,"onUpdate:error":D[1]||(D[1]=g=>p(r).name=g)},null,8,["modelValue","placeholder","error"])])])]),_:1},8,["form"])}}}),Ke={class:"flex-shrink-0 flex flex-col p-3 w-80 bg-gray-100 dark:bg-neutral-800 rounded-md h-[calc(100vh_-_250px)]"},Je={class:"flex-1 min-h-0 scroller-thin-y scroller-hidden"},Ge={key:0,class:"mt-2 p-2 rounded-md border-dashed border-2 border-gray-400 dark:border-gray-500 text-gray-400 dark:text-gray-500 text-sm"},Qe={class:"p-3 space-y-2"},We=["onClick"],Xe={class:"text-xs flex justify-between"},Ye={class:"space-x-2"},Ze=s("i",{class:"far fa-clock"},null,-1),et={class:"text-xs flex justify-between"},tt={class:"space-x-2"},st={class:"cursor-move"},at=s("i",{class:"fas fa-arrows-up-down-left-right text-gray-400 dark:text-gray-900"},null,-1),ot=[at],it={class:"text-xs text-gray-400"},nt={class:"space-x-2"},rt={key:0},lt=s("i",{class:"fas fa-calendar text-warning"},null,-1),dt=[lt],ut={key:1},ct=s("i",{class:"fas fa-check-circle fa-lg text-success"},null,-1),pt=[ct],mt={key:2},_t=s("i",{class:"fas fa-crown fa-lg text-primary dark:text-gray-400"},null,-1),gt=[_t],ft={key:3},yt=s("i",{class:"fas fa-user fa-lg text-primary dark:text-gray-400"},null,-1),ht=[yt],$t={key:4},vt=s("i",{class:"fas fa-box-archive fa-lg text-primary dark:text-gray-400"},null,-1),kt=[vt],bt={key:5},wt=s("i",{class:"fas fa-star fa-lg text-warning"},null,-1),xt=[wt],Ct={key:6},Dt=s("i",{class:"fas fa-repeat fa-lg text-info"},null,-1),Bt=[Dt],qt={key:7},Vt=s("i",{class:"fas fa-ban fa-lg text-danger"},null,-1),Lt=[Vt],It={name:"TaskListBoardView"},Ut=Object.assign(It,{props:{tasks:{type:Object,default(){return{data:[]}}},preRequisites:{type:Object,default:()=>({})}},emits:["newListAdded"],setup(V,{emit:b}){const _=V;A();const v=S(),r=W();P("emitter");const l=T({lists:[],emptyList:[]}),k=()=>{l.lists=[];let n=[{name:"Uncategorized",uuid:"uncategorized",items:[]}];_.preRequisites.taskLists.forEach(g=>{n.push({name:g.name,uuid:g.uuid,items:[]})}),_.tasks.data.forEach(g=>{var B;if((B=g.list)!=null&&B.uuid){let i=n.find(e=>e.name==g.list.name);i?i.items.push(g):n.push({name:g.list.name,uuid:g.list.uuid,items:[g]})}else n.find(i=>i.name==="Uncategorized").items.push(g)}),n.find(g=>g.name==="Uncategorized").items.length===0&&(n=n.filter(g=>g.name!=="Uncategorized")),l.lists=n},u=n=>{let g=l.lists.map(B=>B.uuid);r.dispatch("task/reorderList",{uuids:g}).then(B=>{}).catch(B=>{})},D=n=>{var B,i;let g=0;if(n.removed&&(g=n.removed.oldIndex),n.added){let e=n.added.element.uuid,c=(B=n.added.element.list)==null?void 0:B.uuid,t=null,y=[];l.lists.forEach(L=>{L.items.find(F=>F.uuid===e)&&(t=L.uuid,y=L.items.map(F=>F.uuid))}),r.dispatch("task/moveList",{uuid:e,listUuid:t,itemUuids:y}).then(L=>{}).catch(L=>{c===void 0&&(c="uncategorized"),l.lists.find(I=>I.uuid===c).items.splice(g,0,n.added.element);let E=l.lists.find(I=>I.uuid===t);E.items=E.items.filter(I=>I.uuid!==e)})}if(n.moved){n.moved.element.uuid;let e=((i=n.moved.element.list)==null?void 0:i.uuid)||"uncategorized",t=l.lists.find(y=>y.uuid===e).items.map(y=>y.uuid);r.dispatch("task/reorderItems",{uuids:t}).then(y=>{}).catch(y=>{})}},q=n=>{b("newListAdded",n.option),l.lists.push({name:n.option.name,uuid:n.option.uuid,items:[]})};return G(()=>_.tasks,n=>{k()},{deep:!0}),N(()=>{k()}),(n,g)=>{const B=h("ProgressBar"),i=h("KanBanView"),e=R("tooltip");return o(),$(i,{"add-list":!!p(U)("task:config")},{addListTitle:a(()=>[C(m(n.$trans("global.add",{attribute:n.$trans("task.list.list")})),1)]),addListForm:a(()=>[f(He,{onCompleted:q})]),default:a(()=>[f(p(H),{class:"flex space-x-2",list:l.lists,onChange:u,"item-key":"uuid",disabled:!p(U)("task:config")},{item:a(({element:c})=>[s("div",Ke,[s("h3",{class:M(["flex-shrink-0 text-sm font-medium text-gray-900 dark:text-gray-300",{"cursor-move":!!p(U)("task:config")}])},m(c.name),3),s("div",Je,[f(p(H),{class:"mt-2 space-y-3",list:c.items,group:"items",onChange:D,"item-key":"uuid"},{header:a(()=>[c.items.length===0?(o(),w("div",Ge,m(n.$trans("task.list.info_empty")),1)):d("",!0)]),item:a(({element:t})=>{var y,L;return[s("div",{class:M(["bg-white dark:bg-dark-body text-gray-700 dark:text-gray-400 rounded-md shadow-sm border-2",{"border-success":t.isCompleted,"border-danger":t.isOverdue,"border-warning":t.isDueToday,"border-gray-400":!t.isCompleted&&!t.isOverdue&&!t.isDueToday}])},[s("div",Qe,[s("p",{class:"text-sm cursor-pointer",onClick:F=>p(v).push({name:"TaskShow",params:{uuid:t.uuid}})},m(t.title),9,We),s("div",Xe,[s("div",Ye,[s("span",null,[Ze,C(" "+m(t.dueDateDisplay),1)])])]),s("div",et,[s("div",tt,[x((o(),w("span",st,ot)),[[e,n.$trans("general.move")]]),s("span",it,m(t.codeNumber),1)]),s("div",nt,[t.isOverdue?x((o(),w("span",rt,dt)),[[e,t.overdueDaysDisplay]]):d("",!0),t.isCompleted?(o(),w("span",ut,pt)):d("",!0),t.isOwner?x((o(),w("span",mt,gt)),[[e,n.$trans("task.props.owner")]]):d("",!0),!t.isOwner&&t.isMember?x((o(),w("span",ft,ht)),[[e,n.$trans("task.member.member")]]):d("",!0),t.isArchived?x((o(),w("span",$t,kt)),[[e,n.$trans("general.archived")]]):d("",!0),t.isFavorite?x((o(),w("span",bt,xt)),[[e,n.$trans("task.props.favorite")]]):d("",!0),t.shouldRepeat&&((y=t.repeatation)==null?void 0:y.nextRepeatDateDisplay)?x((o(),w("span",Ct,Bt)),[[e,n.$trans("task.repeat.props.next_repeat_date")+": "+((L=t.repeatation)==null?void 0:L.nextRepeatDateDisplay)]]):d("",!0),t.isCancelled?x((o(),w("span",qt,Lt)),[[e,n.$trans("general.cancelled")]]):d("",!0),t.priority?x((o(),w("i",{key:8,class:"fas fa-circle",style:z(`color: ${t.priority.color};`)},null,4)),[[e,t.priority.name]]):d("",!0),t.category?x((o(),w("i",{key:9,class:"fas fa-square",style:z(`color: ${t.category.color};`)},null,4)),[[e,t.category.name]]):d("",!0)])])]),s("div",null,[t.hasProgress?(o(),$(B,{key:0,percent:t.progress,color:t.progressColor,"bg-color":"transparent"},null,8,["percent","color"])):d("",!0)])],2)]}),_:2},1032,["list"])])])]),_:1},8,["list","disabled"])]),_:1},8,["add-list"])}}}),Ft={class:"grid grid-cols-3 gap-6"},Et={class:"col-span-3 sm:col-span-1"},Tt={class:"col-span-3 sm:col-span-1"},Ot={class:"col-span-3 sm:col-span-1"},At={class:"col-span-3 sm:col-span-1"},St={class:"col-span-3 sm:col-span-1"},Pt={class:"col-span-3 sm:col-span-1"},Rt={class:"col-span-3 sm:col-span-1"},jt={class:"col-span-2 sm:col-span-1"},Nt={class:"col-span-2 sm:col-span-1"},Mt={class:"col-span-2 sm:col-span-1"},zt={__name:"Filter",emits:["hide"],setup(V,{emit:b}){const _=A(),v={codeNumber:"",title:"",categories:[],priorities:[],employees:[],startDate:"",endDate:"",dueStartDate:"",dueEndDate:"",tagsIncluded:[],tagsExcluded:[],isArchived:!1},r=T({...v}),l=T({employees:[],categories:[],priorities:[],tagsIncluded:[],tagsExcluded:[],isLoaded:!(_.query.employees||_.query.categories||_.query.priorities||_.query.tagsIncluded||_.query.tagsExcluded)});return N(async()=>{l.employees=_.query.employees?_.query.employees.split(","):[],l.categories=_.query.categories?_.query.categories.split(","):[],l.priorities=_.query.priorities?_.query.priorities.split(","):[],l.tagsIncluded=_.query.tagsIncluded?_.query.tagsIncluded.split(","):[],l.tagsExcluded=_.query.tagsExcluded?_.query.tagsExcluded.split(","):[],l.isLoaded=!0}),(k,u)=>{const D=h("BaseInput"),q=h("BaseSelectSearch"),n=h("DatePicker"),g=h("BaseSwitch"),B=h("FilterForm");return o(),$(B,{"init-form":v,form:r,multiple:["employees","categories","priorities","tagsIncluded","tagsExcluded"],onHide:u[12]||(u[12]=i=>b("hide"))},{default:a(()=>[s("div",Ft,[s("div",Et,[f(D,{type:"text",modelValue:r.codeNumber,"onUpdate:modelValue":u[0]||(u[0]=i=>r.codeNumber=i),name:"codeNumber",label:k.$trans("task.props.code_number")},null,8,["modelValue","label"])]),s("div",Tt,[f(D,{type:"text",modelValue:r.title,"onUpdate:modelValue":u[1]||(u[1]=i=>r.title=i),name:"title",label:k.$trans("task.props.title")},null,8,["modelValue","label"])]),s("div",Ot,[l.isLoaded?(o(),$(q,{key:0,multiple:"",name:"categories",label:k.$trans("global.select",{attribute:k.$trans("task.category.category")}),modelValue:r.categories,"onUpdate:modelValue":u[2]||(u[2]=i=>r.categories=i),"value-prop":"uuid","init-search":l.categories,"search-action":"option/list","additional-search-query":{type:"task_category"}},null,8,["label","modelValue","init-search"])):d("",!0)]),s("div",At,[l.isLoaded?(o(),$(q,{key:0,multiple:"",name:"priorities",label:k.$trans("global.select",{attribute:k.$trans("task.priority.priority")}),modelValue:r.priorities,"onUpdate:modelValue":u[3]||(u[3]=i=>r.priorities=i),"value-prop":"uuid","init-search":l.priorities,"search-action":"option/list","additional-search-query":{type:"task_priority"}},null,8,["label","modelValue","init-search"])):d("",!0)]),s("div",St,[l.isLoaded?(o(),$(q,{key:0,multiple:"",name:"employees",label:k.$trans("global.select",{attribute:k.$trans("employee.employee")}),modelValue:r.employees,"onUpdate:modelValue":u[4]||(u[4]=i=>r.employees=i),"value-prop":"uuid","init-search":l.employees,"search-key":"name","search-action":"employee/list"},{selectedOption:a(i=>[C(m(i.value.name)+" ("+m(i.value.codeNumber)+") ",1)]),listOption:a(i=>[C(m(i.option.name)+" ("+m(i.option.codeNumber)+") ",1)]),_:1},8,["label","modelValue","init-search"])):d("",!0)]),s("div",Pt,[f(n,{start:r.startDate,"onUpdate:start":u[5]||(u[5]=i=>r.startDate=i),end:r.endDate,"onUpdate:end":u[6]||(u[6]=i=>r.endDate=i),name:"startDateBetween",as:"range",label:k.$trans("global.date_between",{attribute:k.$trans("task.props.start_date")})},null,8,["start","end","label"])]),s("div",Rt,[f(n,{start:r.dueStartDate,"onUpdate:start":u[7]||(u[7]=i=>r.dueStartDate=i),end:r.dueEndDate,"onUpdate:end":u[8]||(u[8]=i=>r.dueEndDate=i),name:"dueDateBetween",as:"range",label:k.$trans("global.date_between",{attribute:k.$trans("task.props.due_date")})},null,8,["start","end","label"])]),s("div",jt,[l.isLoaded?(o(),$(q,{key:0,tags:"",name:"tagsIncluded",label:k.$trans("general.tags_included"),modelValue:r.tagsIncluded,"onUpdate:modelValue":u[9]||(u[9]=i=>r.tagsIncluded=i),"init-search":l.tagsIncluded,"search-action":"tag/list"},null,8,["label","modelValue","init-search"])):d("",!0)]),s("div",Nt,[l.isLoaded?(o(),$(q,{key:0,tags:"",name:"tagsExcluded",label:k.$trans("general.tags_excluded"),modelValue:r.tagsExcluded,"onUpdate:modelValue":u[10]||(u[10]=i=>r.tagsExcluded=i),"init-search":l.tagsExcluded,"search-action":"tag/list"},null,8,["label","modelValue","init-search"])):d("",!0)]),s("div",Mt,[f(g,{vertical:"",modelValue:r.isArchived,"onUpdate:modelValue":u[11]||(u[11]=i=>r.isArchived=i),name:"isArchived",label:k.$trans("general.archived")},null,8,["modelValue","label"])])])]),_:1},8,["form"])}}},Ht=s("i",{class:"fas fa-list"},null,-1),Kt=s("i",{class:"fas fa-th-large"},null,-1),Jt=s("i",{class:"fas fa-table-columns"},null,-1),Gt={name:"TaskList"},Xt=Object.assign(Gt,{setup(V){const b=A(),_=S(),v=P("emitter");let r=["filter"];U("task:create")&&r.unshift("create"),U("task:config")&&r.unshift("config");let l=[];U("task:export")&&(l=["print","pdf","excel"]);const k=X("task.view"),u="task/",D=T({taskLists:[]}),q=Y(!1),n=T({}),g=c=>{Object.assign(n,c)},B=c=>{Object.assign(D,c)},i=c=>{D.taskLists.push(c)},e=()=>{b.name=="TaskList"&&(!b.query.view||b.query.view===void 0)&&_.push({query:{view:k.value}})};return G(()=>b.query.view,(c,t)=>{e(),c&&t!==void 0&&v.emit("listItems")}),N(()=>{e()}),(c,t)=>{const y=h("BaseButton"),L=h("PageHeaderAction"),F=h("PageHeader"),E=h("ParentTransition"),I=h("ListItem"),j=R("tooltip");return o(),$(I,{"init-url":u,"pre-requisites":!0,onSetPreRequisites:B,onSetItems:g},{header:a(()=>[f(F,{title:c.$trans("task.task")},{default:a(()=>[f(L,{url:"tasks/",name:"Task",title:c.$trans("task.task"),actions:p(r),"dropdown-actions":p(l),onToggleFilter:t[3]||(t[3]=O=>q.value=!q.value)},{after:a(()=>[p(b).query.view!="list"?x((o(),$(y,{key:0,design:"white",onClick:t[0]||(t[0]=O=>p(_).push({query:{view:"list"}}))},{default:a(()=>[Ht]),_:1})),[[j,c.$trans("global._view",{attribute:c.$trans("task.config.views.list")})]]):d("",!0),p(b).query.view!="card"?x((o(),$(y,{key:1,design:"white",onClick:t[1]||(t[1]=O=>p(_).push({query:{view:"card"}}))},{default:a(()=>[Kt]),_:1})),[[j,c.$trans("global._view",{attribute:c.$trans("task.config.views.card")})]]):d("",!0),p(b).query.view!="board"?x((o(),$(y,{key:2,design:"white",onClick:t[2]||(t[2]=O=>p(_).push({query:{view:"board"}}))},{default:a(()=>[Jt]),_:1})),[[j,c.$trans("global._view",{attribute:c.$trans("task.config.views.board")})]]):d("",!0)]),_:1},8,["title","actions","dropdown-actions"])]),_:1},8,["title"])]),filter:a(()=>[f(E,{appear:"",visibility:q.value},{default:a(()=>[f(zt,{onRefresh:t[4]||(t[4]=O=>p(v).emit("listItems")),onHide:t[5]||(t[5]=O=>q.value=!1)})]),_:1},8,["visibility"])]),default:a(()=>[p(b).query.view=="card"?(o(),$(E,{key:0,appear:"",visibility:!0},{default:a(()=>[f(Le,{tasks:n},null,8,["tasks"])]),_:1})):d("",!0),p(b).query.view=="list"?(o(),$(E,{key:1,appear:"",visibility:!0},{default:a(()=>[f(je,{tasks:n},null,8,["tasks"])]),_:1})):d("",!0),p(b).query.view=="board"?(o(),$(E,{key:2,appear:"",visibility:!0},{default:a(()=>[n.meta?(o(),$(Ut,{key:0,tasks:n,"pre-requisites":D,onNewListAdded:i},null,8,["tasks","pre-requisites"])):d("",!0)]),_:1})):d("",!0)]),_:1})}}});export{Xt as default};
