import{k as N,A as q,q as I,s as w,t as z,I as A,r as d,o as h,c as F,h as R,j as y,d as s,v as U,x as B,i as D,a as c,e as a,F as x}from"./app.ca5d1c04.js";const G={class:"grid grid-cols-3 gap-6"},J={class:"col-span-3 sm:col-span-1"},K={key:0,class:"col-span-3 sm:col-span-1"},Q={key:0,class:"mt-4 grid grid-cols-3 gap-6"},W={class:"col-span-3 sm:col-span-1"},X={class:"col-span-3 sm:col-span-1"},Y={class:"col-span-3 sm:col-span-1"},Z={class:"col-span-3 sm:col-span-1"},ee={class:"col-span-3 sm:col-span-1"},te={class:"mt-4 grid grid-cols-1"},ae={class:"col"},oe={class:"grid grid-cols-1"},ne={class:"col"},re={name:"EmployeeRecordForm"},le=Object.assign(re,{props:{employee:{type:Object,default(){return{}}}},setup(i){const p=i,b=N(),n=q("$trans"),L=[{key:"period",label:n("employee.record.props.period"),visibility:!0},{key:"department",label:n("company.department.department"),visibility:!0},{key:"designation",label:n("company.designation.designation"),visibility:!0},{key:"branch",label:n("company.branch.branch"),visibility:!0},{key:"employmentStatus",label:n("employee.employment_status.employment_status"),visibility:!0}],k={end:!1,endDate:"",startDate:"",department:"",designation:"",branch:"",employmentStatus:"",remarks:"",media:[],mediaToken:"",mediaHash:""},E="employee/record/",m=I(E),o=w({...k}),l=w({department:"",designation:"",branch:"",employmentStatus:"",isLoaded:!1}),M=r=>{var e,u,S,v,V,_,f,g;Object.assign(k,{end:!!r.isEnded,startDate:r.startDate,endDate:r.isEnded?r.endDate:"",department:(e=r.department)==null?void 0:e.uuid,designation:(u=r.designation)==null?void 0:u.uuid,branch:(S=r.branch)==null?void 0:S.uuid,employmentStatus:(v=r.employmentStatus)==null?void 0:v.uuid,remarks:r.remarks,media:r.media,mediaToken:r.mediaToken}),Object.assign(o,A(k)),l.department=(V=r.department)==null?void 0:V.name,l.designation=(_=r.designation)==null?void 0:_.name,l.branch=(f=r.branch)==null?void 0:f.name,l.employmentStatus=(g=r.employmentStatus)==null?void 0:g.name,l.isLoaded=!0};return z(()=>{var r,e,u,S,v,V,_,f,g,T,j,$,t,O,P,C,H;Object.assign(k,{startDate:(r=p.employee.lastRecord)==null?void 0:r.startDate,department:(u=(e=p.employee.lastRecord)==null?void 0:e.department)==null?void 0:u.uuid,designation:(v=(S=p.employee.lastRecord)==null?void 0:S.designation)==null?void 0:v.uuid,branch:(_=(V=p.employee.lastRecord)==null?void 0:V.branch)==null?void 0:_.uuid,employmentStatus:(g=(f=p.employee.lastRecord)==null?void 0:f.employmentStatus)==null?void 0:g.uuid}),Object.assign(o,A(k)),l.department=(j=(T=p.employee.lastRecord)==null?void 0:T.department)==null?void 0:j.name,l.designation=(t=($=p.employee.lastRecord)==null?void 0:$.designation)==null?void 0:t.name,l.branch=(P=(O=p.employee.lastRecord)==null?void 0:O.branch)==null?void 0:P.name,l.employmentStatus=(H=(C=p.employee.lastRecord)==null?void 0:C.employmentStatus)==null?void 0:H.name,l.isLoaded=!0}),(r,e)=>{const u=d("DataCell"),S=d("DataRow"),v=d("SimpleTable"),V=d("BaseCard"),_=d("BaseSwitch"),f=d("DatePicker"),g=d("BaseSelectSearch"),T=d("BaseTextarea"),j=d("MediaUpload"),$=d("FormAction");return h(),F(x,null,[i.employee.lastRecord?(h(),R(V,{key:0,"no-padding":"","no-content-padding":"","bottom-content-padding":"",class:"mb-4"},{default:y(()=>[s(v,{header:L},{default:y(()=>[s(S,null,{default:y(()=>[s(u,{name:"period"},{default:y(()=>[U(B(i.employee.lastRecord.period),1)]),_:1}),s(u,{name:"department"},{default:y(()=>[U(B(i.employee.lastRecord.department.name),1)]),_:1}),s(u,{name:"designation"},{default:y(()=>[U(B(i.employee.lastRecord.designation.name),1)]),_:1}),s(u,{name:"branch"},{default:y(()=>[U(B(i.employee.lastRecord.branch.name),1)]),_:1}),s(u,{name:"employmentStatus"},{default:y(()=>[U(B(i.employee.lastRecord.employmentStatus.name),1)]),_:1})]),_:1})]),_:1})]),_:1})):D("",!0),s($,{"no-data-fetch":"","init-url":E,uuid:a(b).params.uuid,"module-uuid":a(b).params.muuid,"init-form":k,form:o,"set-form":M,redirect:{name:"EmployeeRecord",params:{uuid:a(b).params.uuid}}},{default:y(()=>[c("div",G,[c("div",J,[s(_,{modelValue:o.end,"onUpdate:modelValue":e[0]||(e[0]=t=>o.end=t),name:"end",label:a(n)("employee.record.props.end"),error:a(m).end,"onUpdate:error":e[1]||(e[1]=t=>a(m).end=t),vertical:""},null,8,["modelValue","label","error"])]),o.end?(h(),F("div",K,[s(f,{modelValue:o.endDate,"onUpdate:modelValue":e[2]||(e[2]=t=>o.endDate=t),name:"endDate",label:a(n)("employee.record.props.end_date"),error:a(m).endDate,"onUpdate:error":e[3]||(e[3]=t=>a(m).endDate=t)},null,8,["modelValue","label","error"])])):D("",!0)]),!o.end||a(b).params.muuid?(h(),F("div",Q,[c("div",W,[s(f,{modelValue:o.startDate,"onUpdate:modelValue":e[4]||(e[4]=t=>o.startDate=t),name:"startDate",label:a(n)("employee.record.props.start_date"),error:a(m).startDate,"onUpdate:error":e[5]||(e[5]=t=>a(m).startDate=t)},null,8,["modelValue","label","error"])]),c("div",X,[l.isLoaded?(h(),R(g,{key:0,name:"department",label:a(n)("global.select",{attribute:a(n)("company.department.department")}),modelValue:o.department,"onUpdate:modelValue":e[6]||(e[6]=t=>o.department=t),error:a(m).department,"onUpdate:error":e[7]||(e[7]=t=>a(m).department=t),"label-prop":"name","value-prop":"uuid","init-search":l.department,"init-search-key":"name","search-action":"company/department/list"},null,8,["label","modelValue","error","init-search"])):D("",!0)]),c("div",Y,[l.isLoaded?(h(),R(g,{key:0,name:"designation",label:a(n)("global.select",{attribute:a(n)("company.designation.designation")}),modelValue:o.designation,"onUpdate:modelValue":e[8]||(e[8]=t=>o.designation=t),error:a(m).designation,"onUpdate:error":e[9]||(e[9]=t=>a(m).designation=t),"label-prop":"name","value-prop":"uuid","init-search":l.designation,"init-search-key":"name","search-action":"company/designation/list"},null,8,["label","modelValue","error","init-search"])):D("",!0)]),c("div",Z,[l.isLoaded?(h(),R(g,{key:0,name:"branch",label:a(n)("global.select",{attribute:a(n)("company.branch.branch")}),modelValue:o.branch,"onUpdate:modelValue":e[10]||(e[10]=t=>o.branch=t),error:a(m).branch,"onUpdate:error":e[11]||(e[11]=t=>a(m).branch=t),"label-prop":"name","value-prop":"uuid","init-search":l.branch,"init-search-key":"name","search-action":"company/branch/list"},null,8,["label","modelValue","error","init-search"])):D("",!0)]),c("div",ee,[l.isLoaded?(h(),R(g,{key:0,name:"employmentStatus",label:a(n)("global.select",{attribute:a(n)("employee.employment_status.employment_status")}),modelValue:o.employmentStatus,"onUpdate:modelValue":e[12]||(e[12]=t=>o.employmentStatus=t),error:a(m).employmentStatus,"onUpdate:error":e[13]||(e[13]=t=>a(m).employmentStatus=t),"label-prop":"name","value-prop":"uuid","init-search":l.employmentStatus,"init-search-key":"name","search-action":"option/list","additional-search-query":{type:"employment_status"}},null,8,["label","modelValue","error","init-search"])):D("",!0)])])):D("",!0),c("div",te,[c("div",ae,[s(T,{modelValue:o.remarks,"onUpdate:modelValue":e[14]||(e[14]=t=>o.remarks=t),name:"remarks",label:a(n)("employee.record.props.remarks"),error:a(m).remarks,"onUpdate:error":e[15]||(e[15]=t=>a(m).remarks=t)},null,8,["modelValue","label","error"])])]),c("div",oe,[c("div",ne,[s(j,{multiple:"",label:a(n)("general.file"),module:"employee_record",media:o.media,onSetHash:e[16]||(e[16]=t=>o.mediaHash=t),onSetToken:e[17]||(e[17]=t=>o.mediaToken=t)},null,8,["label","media"])])])]),_:1},8,["uuid","module-uuid","form","redirect"])],64)}}}),se={name:"EmployeeRecordAction"},de=Object.assign(se,{props:{employee:{type:Object,default(){return{}}}},setup(i){const p=N();return(b,n)=>{const L=d("PageHeaderAction"),k=d("PageHeader"),E=d("ParentTransition");return h(),F(x,null,[s(k,{title:b.$trans(a(p).meta.trans,{attribute:b.$trans(a(p).meta.label)}),navs:[{label:b.$trans("employee.employee"),path:"EmployeeList"},{label:i.employee.contact.name,path:{name:"EmployeeShow",params:{uuid:i.employee.uuid}}},{label:b.$trans("employee.record.record"),path:{name:"EmployeeRecord",params:{uuid:i.employee.uuid}}}]},{default:y(()=>[s(L,{name:"EmployeeRecord",title:b.$trans("employee.record.record"),actions:["list"]},null,8,["title"])]),_:1},8,["title","navs"]),s(E,{appear:"",visibility:!0},{default:y(()=>[s(le,{employee:i.employee},null,8,["employee"])]),_:1})],64)}}});export{de as default};
