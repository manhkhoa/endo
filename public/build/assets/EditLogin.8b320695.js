import{k as A,m as I,A as L,s as w,q as T,b as D,t as H,I as M,r as p,o as u,c as b,h as U,e as t,i as V,d as l,j as g,F as E,a as m,v as z,x as G}from"./app.ca5d1c04.js";const J={class:"grid grid-cols-3 gap-6"},K={class:"col-span-3 sm:col-span-1"},Q={class:"grid grid-cols-3 gap-6"},W={class:"col-span-3 sm:col-span-1"},X={key:0,class:"col-span-3 sm:col-span-1"},Y={class:"col-span-3 sm:col-span-1"},Z={class:"col-span-3 sm:col-span-1"},_={class:"col-span-3 sm:col-span-1"},h={class:"col-span-3 sm:col-span-1"},ee={name:"EmployeeEditLogin"},se=Object.assign(ee,{props:{employee:{type:Object,default(){return{}}}},setup(d){const B=d,$=A(),S=I(),j=L("emitter"),c={username:"",email:"",password:"",passwordConfirmation:"",roles:[]},v="employee/",q="user/",k=w({}),r=T(v),y=D(()=>B.employee.contact.user),n=w({isValidated:!1,userExists:!1}),a=w({...c}),F=s=>{Object.assign(k,s)},P=s=>{n.isValidated=!0,n.userExists=s},R=()=>{j.emit("employeeUpdated"),S.push({name:"EmployeeShowLogin",params:{uuid:B.employee.uuid}})};return H(async()=>{var s,e,f;n.isValidated=!!y.value,n.userExists=!!y.value,Object.assign(c,{username:(s=y.value)==null?void 0:s.username,email:(e=y.value)==null?void 0:e.email,roles:((f=y.value)==null?void 0:f.roles.map(i=>i.uuid))||[]}),Object.assign(a,M(c))}),(s,e)=>{const f=p("PageHeader"),i=p("BaseInput"),O=p("BaseButton"),C=p("FormAction"),x=p("BaseSelect"),N=p("ParentTransition");return u(),b(E,null,[d.employee.uuid?(u(),U(f,{key:0,title:s.$trans(t($).meta.trans,{attribute:s.$trans(t($).meta.label)}),navs:[{label:s.$trans("employee.employee"),path:"Employee"},{label:d.employee.contact.name,path:{name:"EmployeeShow",params:{uuid:d.employee.uuid}}}]},null,8,["title","navs"])):V("",!0),l(N,{appear:"",visibility:!0},{default:g(()=>[d.employee.uuid?(u(),b(E,{key:0},[n.isValidated?(u(),U(C,{key:1,"no-data-fetch":"","pre-requisites":!0,"pre-requisite-url":q,onSetPreRequisites:F,"init-url":v,action:n.userExists?"updateUser":"createUser","init-form":c,form:a,"after-submit":R},{default:g(()=>[m("div",Q,[m("div",W,[l(i,{readonly:"",disabled:"",type:"text",modelValue:a.email,"onUpdate:modelValue":e[2]||(e[2]=o=>a.email=o),name:"email",label:s.$trans("contact.login.props.email"),error:t(r).email,"onUpdate:error":e[3]||(e[3]=o=>t(r).email=o)},null,8,["modelValue","label","error"])]),n.userExists?(u(),b("div",X,[l(i,{readonly:"",disabled:"",type:"text",modelValue:a.username,"onUpdate:modelValue":e[4]||(e[4]=o=>a.username=o),name:"username",label:s.$trans("contact.login.props.username"),error:t(r).username,"onUpdate:error":e[5]||(e[5]=o=>t(r).username=o)},null,8,["modelValue","label","error"])])):V("",!0),n.userExists?V("",!0):(u(),b(E,{key:1},[m("div",Y,[l(i,{type:"text",modelValue:a.username,"onUpdate:modelValue":e[6]||(e[6]=o=>a.username=o),name:"username",label:s.$trans("contact.login.props.username"),error:t(r).username,"onUpdate:error":e[7]||(e[7]=o=>t(r).username=o)},null,8,["modelValue","label","error"])]),m("div",Z,[l(i,{type:"password",modelValue:a.password,"onUpdate:modelValue":e[8]||(e[8]=o=>a.password=o),name:"password",label:s.$trans("contact.login.props.password"),error:t(r).password,"onUpdate:error":e[9]||(e[9]=o=>t(r).password=o)},null,8,["modelValue","label","error"])]),m("div",_,[l(i,{type:"password",modelValue:a.passwordConfirmation,"onUpdate:modelValue":e[10]||(e[10]=o=>a.passwordConfirmation=o),name:"passwordConfirmation",label:s.$trans("contact.login.props.password_confirmation"),error:t(r).passwordConfirmation,"onUpdate:error":e[11]||(e[11]=o=>t(r).passwordConfirmation=o)},null,8,["modelValue","label","error"])])],64)),m("div",h,[l(x,{modelValue:a.roles,"onUpdate:modelValue":e[12]||(e[12]=o=>a.roles=o),name:"roles",label:s.$trans("contact.login.props.role"),options:k.roles,multiple:"","label-prop":"label","value-prop":"uuid",error:t(r).roles,"onUpdate:error":e[13]||(e[13]=o=>t(r).roles=o)},null,8,["modelValue","label","options","error"])])])]),_:1},8,["action","form"])):(u(),U(C,{key:0,"no-action-button":"","no-data-fetch":"","init-url":v,action:"confirmUser","init-form":c,form:a,"after-submit":P,"stay-on":"",redirect:{name:"EmployeeShowLogin",params:{uuid:d.employee.uuid}}},{default:g(()=>[m("div",J,[m("div",K,[l(i,{type:"text",modelValue:a.email,"onUpdate:modelValue":e[0]||(e[0]=o=>a.email=o),name:"email",label:s.$trans("contact.login.props.email"),error:t(r).email,"onUpdate:error":e[1]||(e[1]=o=>t(r).email=o)},null,8,["modelValue","label","error"])])]),l(O,{class:"mt-4",type:"submit"},{default:g(()=>[z(G(s.$trans("general.validate")),1)]),_:1})]),_:1},8,["form","redirect"]))],64)):V("",!0)]),_:1})],64)}}});export{se as default};
