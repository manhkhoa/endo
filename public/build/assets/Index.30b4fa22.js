import{s as E,r as o,o as u,h as y,j as e,a as C,k as M,m as N,A as V,p as b,y as O,e as i,d as a,i as F,v as m,x as r,c as w,z as U,F as B}from"./app.ca5d1c04.js";const x=C("div",{class:"grid grid-cols-3 gap-6"},[C("div",{class:"col-span-3 sm:col-span-1"})],-1),z={__name:"Filter",emits:["hide"],setup(n,{emit:g}){const v={},c=E({...v});return(_,p)=>{const h=o("FilterForm");return u(),y(h,{"init-form":v,form:c,onHide:p[0]||(p[0]=f=>g("hide"))},{default:e(()=>[x]),_:1},8,["form"])}}},q={class:"text-xs"},G={name:"EmployeeRecordList"},K=Object.assign(G,{props:{employee:{type:Object,default(){return{}}}},setup(n){const g=n,v=M(),c=N(),_=V("emitter");let p=[];b("employment-record:manage")&&!g.employee.lastRecord.endDate&&!g.employee.isDefault&&p.unshift("create");const h="employee/record/",f=O(!1),$=E({}),I=l=>{Object.assign($,l)};return(l,s)=>{const H=o("PageHeaderAction"),P=o("PageHeader"),D=o("ParentTransition"),d=o("DataCell"),k=o("FloatingMenuItem"),S=o("FloatingMenu"),T=o("DataRow"),j=o("BaseButton"),A=o("DataTable"),L=o("ListItem");return u(),y(L,{"init-url":h,uuid:i(v).params.uuid,onSetItems:I},{header:e(()=>[n.employee.uuid?(u(),y(P,{key:0,title:l.$trans("employee.record.record"),navs:[{label:l.$trans("employee.employee"),path:"Employee"},{label:n.employee.contact.name,path:{name:"EmployeeShow",params:{uuid:n.employee.uuid}}}]},{default:e(()=>[a(H,{url:`employees/${n.employee.uuid}/records/`,name:"EmployeeRecord",title:l.$trans("employee.record.record"),actions:i(p),"dropdown-actions":["print","pdf","excel"],onToggleFilter:s[0]||(s[0]=t=>f.value=!f.value)},null,8,["url","title","actions"])]),_:1},8,["title","navs"])):F("",!0)]),filter:e(()=>[a(D,{appear:"",visibility:f.value},{default:e(()=>[a(z,{onRefresh:s[1]||(s[1]=t=>i(_).emit("listItems")),onHide:s[2]||(s[2]=t=>f.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[a(D,{appear:"",visibility:!0},{default:e(()=>[a(A,{header:$.headers,meta:$.meta,module:"employee.record",onRefresh:s[4]||(s[4]=t=>i(_).emit("listItems"))},{actionButton:e(()=>[i(b)("employment-record:manage")&&!n.employee.lastRecord.endDate&&!n.employee.isDefault?(u(),y(j,{key:0,onClick:s[3]||(s[3]=t=>i(c).push({name:"EmployeeRecordCreate"}))},{default:e(()=>[m(r(l.$trans("global.add",{attribute:l.$trans("employee.record.record")})),1)]),_:1})):F("",!0)]),default:e(()=>[(u(!0),w(B,null,U($.data,t=>(u(),y(T,{key:t.uuid},{default:e(()=>[a(d,{name:"startDate"},{default:e(()=>[m(r(t.period)+" ",1),C("div",q,r(t.duration),1)]),_:2},1024),a(d,{name:"department"},{default:e(()=>[m(r(t.department.name),1)]),_:2},1024),a(d,{name:"designation"},{default:e(()=>[m(r(t.designation.name),1)]),_:2},1024),a(d,{name:"branch"},{default:e(()=>[m(r(t.branch.name),1)]),_:2},1024),a(d,{name:"employmentStatus"},{default:e(()=>[m(r(t.employmentStatus.name),1)]),_:2},1024),a(d,{name:"action"},{default:e(()=>[a(S,null,{default:e(()=>[a(k,{icon:"fas fa-arrow-circle-right",onClick:R=>i(c).push({name:"EmployeeRecordShow",params:{uuid:n.employee.uuid,muuid:t.uuid}})},{default:e(()=>[m(r(l.$trans("general.show")),1)]),_:2},1032,["onClick"]),i(b)("employment-record:manage")&&!n.employee.isDefault?(u(),w(B,{key:0},[a(k,{icon:"fas fa-edit",onClick:R=>i(c).push({name:"EmployeeRecordEdit",params:{uuid:n.employee.uuid,muuid:t.uuid}})},{default:e(()=>[m(r(l.$trans("general.edit")),1)]),_:2},1032,["onClick"]),a(k,{icon:"fas fa-trash",onClick:R=>i(_).emit("deleteItem",{uuid:n.employee.uuid,moduleUuid:t.uuid})},{default:e(()=>[m(r(l.$trans("general.delete")),1)]),_:2},1032,["onClick"])],64)):F("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1},8,["uuid"])}}});export{K as default};
