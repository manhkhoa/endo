import{k as N,s as w,t as R,r as l,o as m,h as g,j as e,a as C,d as n,i as $,m as U,A as M,p as v,y as j,e as r,v as i,x as d,c as E,z as O,F as z}from"./app.ca5d1c04.js";const G={class:"grid grid-cols-3 gap-6"},J={class:"col-span-3 sm:col-span-1"},K={class:"col-span-3 sm:col-span-1"},Q={class:"col-span-3 sm:col-span-1"},W={class:"col-span-3 sm:col-span-1"},X={__name:"Filter",emits:["hide"],setup(V,{emit:b}){const p=N(),k={startDate:"",endDate:"",ledgers:[],secondaryLedgers:[],showCancelled:!1},o=w({...k}),y=w({ledgers:[],secondaryLedgers:[],isLoaded:!(p.query.ledgers||p.query.secondaryLedgers)});return R(async()=>{y.ledgers=p.query.ledgers?p.query.ledgers.split(","):[],y.secondaryLedgers=p.query.secondaryLedgers?p.query.secondaryLedgers.split(","):[],y.isLoaded=!0}),(f,t)=>{const L=l("DatePicker"),F=l("BaseSelectSearch"),s=l("BaseSwitch"),c=l("FilterForm");return m(),g(c,{"init-form":k,form:o,multiple:["ledgers","secondaryLedgers"],onHide:t[5]||(t[5]=u=>b("hide"))},{default:e(()=>[C("div",G,[C("div",J,[n(L,{start:o.startDate,"onUpdate:start":t[0]||(t[0]=u=>o.startDate=u),end:o.endDate,"onUpdate:end":t[1]||(t[1]=u=>o.endDate=u),name:"dateBetween",as:"range",label:f.$trans("general.date_between")},null,8,["start","end","label"])]),C("div",K,[y.isLoaded?(m(),g(F,{key:0,multiple:"",name:"ledgers",label:f.$trans("global.select",{attribute:f.$trans("finance.ledger.ledger")}),modelValue:o.ledgers,"onUpdate:modelValue":t[2]||(t[2]=u=>o.ledgers=u),"label-prop":"name","value-prop":"uuid","init-search":y.ledgers,"search-key":"name","search-action":"finance/ledger/list","additional-search-query":{subType:"primary"}},null,8,["label","modelValue","init-search"])):$("",!0)]),C("div",Q,[y.isLoaded?(m(),g(F,{key:0,multiple:"",name:"secondaryLedgers",label:f.$trans("global.select",{attribute:f.$trans("finance.ledger.secondary_ledger")}),modelValue:o.secondaryLedgers,"onUpdate:modelValue":t[3]||(t[3]=u=>o.secondaryLedgers=u),"label-prop":"name","value-prop":"uuid","init-search":y.secondaryLedgers,"search-key":"name","search-action":"finance/ledger/list"},null,8,["label","modelValue","init-search"])):$("",!0)]),C("div",W,[n(s,{vertical:"",modelValue:o.showCancelled,"onUpdate:modelValue":t[4]||(t[4]=u=>o.showCancelled=u),name:"showCancelled",label:f.$trans("finance.transaction.show_cancelled")},null,8,["modelValue","label"])])])]),_:1},8,["form"])}}},Y={name:"FinanceTransactionList"},x=Object.assign(Y,{setup(V){const b=U(),p=M("emitter");let k=["filter"];v("transaction:create")&&k.unshift("create"),v("finance:config")&&k.unshift("config");let o=[];v("transaction:export")&&(o=["print","pdf","excel"]);const y="finance/transaction/",f=j(!1),t=w({}),L=s=>{Object.assign(t,s)},F=s=>{p.emit("actionItem",{uuid:s.uuid,action:"cancel",confirmation:!0})};return(s,c)=>{const u=l("PageHeaderAction"),I=l("PageHeader"),B=l("ParentTransition"),T=l("BaseBadge"),_=l("DataCell"),h=l("FloatingMenuItem"),S=l("FloatingMenu"),P=l("DataRow"),q=l("BaseButton"),A=l("DataTable"),H=l("ListItem");return m(),g(H,{"init-url":y,onSetItems:L},{header:e(()=>[n(I,{title:s.$trans("finance.transaction.transaction"),navs:[{label:s.$trans("finance.finance"),path:"Finance"}]},{default:e(()=>[n(u,{url:"finance/transactions/",name:"FinanceTransaction","config-path":"FinanceConfig",title:s.$trans("finance.transaction.transaction"),actions:r(k),"dropdown-actions":r(o),onToggleFilter:c[0]||(c[0]=a=>f.value=!f.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[n(B,{appear:"",visibility:f.value},{default:e(()=>[n(X,{onRefresh:c[1]||(c[1]=a=>r(p).emit("listItems")),onHide:c[2]||(c[2]=a=>f.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[n(B,{appear:"",visibility:!0},{default:e(()=>[n(A,{header:t.headers,meta:t.meta,module:"finance.transaction",onRefresh:c[4]||(c[4]=a=>r(p).emit("listItems"))},{actionButton:e(()=>[r(v)("transaction:create")?(m(),g(q,{key:0,onClick:c[3]||(c[3]=a=>r(b).push({name:"FinanceTransactionCreate"}))},{default:e(()=>[i(d(s.$trans("global.add",{attribute:s.$trans("finance.transaction.transaction")})),1)]),_:1})):$("",!0)]),default:e(()=>[(m(!0),E(z,null,O(t.data,a=>(m(),g(P,{key:a.uuid},{default:e(()=>[n(_,{name:"codeNumber"},{default:e(()=>[i(d(a.codeNumber)+" ",1),a.isCancelled?(m(),g(T,{key:0,design:"danger"},{default:e(()=>[i(d(s.$trans("general.cancelled")),1)]),_:1})):$("",!0)]),_:2},1024),n(_,{name:"date"},{default:e(()=>[i(d(a.dateDisplay),1)]),_:2},1024),n(_,{name:"type"},{default:e(()=>[n(T,{design:a.typeDetail.color},{default:e(()=>[i(d(a.typeDisplay),1)]),_:2},1032,["design"])]),_:2},1024),n(_,{name:"ledger"},{default:e(()=>[i(d(a.ledger.name),1)]),_:2},1024),n(_,{name:"secondaryLedger"},{default:e(()=>[i(d(a.record.ledger.name),1)]),_:2},1024),n(_,{name:"amount"},{default:e(()=>[i(d(a.amountDisplay),1)]),_:2},1024),n(_,{name:"createdAt"},{default:e(()=>[i(d(a.createdAt),1)]),_:2},1024),n(_,{name:"action"},{default:e(()=>[n(S,null,{default:e(()=>[n(h,{icon:"fas fa-arrow-circle-right",onClick:D=>r(b).push({name:"FinanceTransactionShow",params:{uuid:a.uuid}})},{default:e(()=>[i(d(s.$trans("general.show")),1)]),_:2},1032,["onClick"]),r(v)("transaction:edit")?(m(),g(h,{key:0,icon:"fas fa-edit",onClick:D=>r(b).push({name:"FinanceTransactionEdit",params:{uuid:a.uuid}})},{default:e(()=>[i(d(s.$trans("general.edit")),1)]),_:2},1032,["onClick"])):$("",!0),r(v)("transaction:create")?(m(),g(h,{key:1,icon:"fas fa-copy",onClick:D=>r(b).push({name:"FinanceTransactionDuplicate",params:{uuid:a.uuid}})},{default:e(()=>[i(d(s.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):$("",!0),!a.isCancelled&&r(v)("transaction:cancel")?(m(),g(h,{key:2,icon:"fas fa-times",onClick:D=>F(a)},{default:e(()=>[i(d(s.$trans("general.cancel")),1)]),_:2},1032,["onClick"])):$("",!0),a.isCancelled&&r(v)("transaction:delete")?(m(),g(h,{key:3,icon:"fas fa-trash",onClick:D=>r(p).emit("deleteItem",{uuid:a.uuid})},{default:e(()=>[i(d(s.$trans("general.delete")),1)]),_:2},1032,["onClick"])):$("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{x as default};
